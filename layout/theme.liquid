<!doctype html>
<html
  {% if request.design_mode %}
    class="shopify-design-mode"
  {% endif %}
  lang="{{ request.locale.iso_code }}"
>
  <head>
    {%- if settings.favicon != blank -%}
      <link
        rel="icon"
        type="image/png"
        href="{{ settings.favicon | image_url: width: 32, height: 32 }}"
      >
    {%- endif -%}

    {% comment %} This a way to wait for main content to load when navigating to a new page so that the view transitions can work consistently {% endcomment %}
    {% if settings.transition_to_main_product or settings.page_transition_enabled %}
      <link
        rel="expect"
        href="#MainContent"
        blocking="render"
        id="view-transition-render-blocker"
      >
    {% endif %}

    {%- render 'meta-tags' -%}
    {%- render 'stylesheets' -%}
    {%- render 'fonts' -%}
    {%- render 'scripts' -%}
    {%- render 'theme-styles-variables' -%}
    {%- render 'color-schemes' -%}

    {% if request.design_mode %}
      {%- render 'theme-editor' -%}
    {% endif %}

    {{ content_for_header }}
  </head>

  <body class="minimal-layout">
    <nav class="navbar">
      <div class="navbar-container">
        <a href="/" class="navbar-logo">
          {%- if settings.logo != blank -%}
            <img src="{{ settings.logo | image_url: width: 150 }}" alt="{{ shop.name }}">
          {%- else -%}
            {{ shop.name }}
          {%- endif -%}
        </a>

        <button class="navbar-toggle" aria-label="Toggle navigation" aria-expanded="false">
          <span class="hamburger"></span>
        </button>

        <ul class="navbar-menu">
          {%- for link in linklists.main-menu.links -%}
            <li class="navbar-item">
              <a href="{{ link.url }}" class="navbar-link{% if link.active %} active{% endif %}">{{ link.title }}</a>
            </li>
          {%- endfor -%}
        </ul>
      </div>
    </nav>

    <style>
      .navbar {
        background: var(--color-background, #ffffff);
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        position: sticky;
        top: 0;
        z-index: 1000;
      }

      .navbar-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .navbar-logo {
        font-size: 1.5rem;
        font-weight: bold;
        text-decoration: none;
        color: var(--color-foreground, #333333);
      }

      .navbar-logo img {
        max-height: 50px;
        width: auto;
      }

      .navbar-menu {
        display: flex;
        list-style: none;
        margin: 0;
        padding: 0;
        gap: 2rem;
      }

      .navbar-link {
        text-decoration: none;
        color: var(--color-foreground, #333333);
        font-weight: 500;
        transition: color 0.3s ease;
      }

      .navbar-link:hover,
      .navbar-link.active {
        color: var(--color-link-hover, #0066cc);
      }

      .navbar-toggle {
        display: none;
        background: none;
        border: none;
        cursor: pointer;
        padding: 0.5rem;
      }

      .hamburger {
        display: block;
        width: 25px;
        height: 3px;
        background: var(--color-foreground, #333333);
        position: relative;
        transition: background 0.3s ease;
      }

      .hamburger::before,
      .hamburger::after {
        content: '';
        position: absolute;
        width: 25px;
        height: 3px;
        background: var(--color-foreground, #333333);
        left: 0;
        transition: transform 0.3s ease;
      }

      .hamburger::before {
        top: -8px;
      }

      .hamburger::after {
        top: 8px;
      }

      .navbar-toggle[aria-expanded="true"] .hamburger {
        background: transparent;
      }

      .navbar-toggle[aria-expanded="true"] .hamburger::before {
        transform: rotate(45deg) translate(5px, 6px);
      }

      .navbar-toggle[aria-expanded="true"] .hamburger::after {
        transform: rotate(-45deg) translate(5px, -6px);
      }

      @media (max-width: 768px) {
        .navbar-toggle {
          display: block;
        }

        .navbar-menu {
          position: absolute;
          top: 100%;
          left: 0;
          right: 0;
          flex-direction: column;
          background: var(--color-background, #ffffff);
          padding: 1rem;
          gap: 0;
          box-shadow: 0 4px 6px rgba(0,0,0,0.1);
          display: none;
        }

        .navbar-menu.active {
          display: flex;
        }

        .navbar-item {
          border-bottom: 1px solid var(--color-border, #eeeeee);
        }

        .navbar-item:last-child {
          border-bottom: none;
        }

        .navbar-link {
          display: block;
          padding: 1rem 0;
        }
      }
    </style>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const toggle = document.querySelector('.navbar-toggle');
        const menu = document.querySelector('.navbar-menu');
        
        toggle.addEventListener('click', function() {
          const expanded = toggle.getAttribute('aria-expanded') === 'true';
          toggle.setAttribute('aria-expanded', !expanded);
          menu.classList.toggle('active');
        });
      });
    </script>

    <main id="MainContent" class="content-for-layout focus-none" role="main" tabindex="-1">
      {{ content_for_layout }}
    </main>

    <script>
      window.shopUrl = '{{ request.origin }}';
      window.routes = {
        cart_add_url: '{{ routes.cart_add_url }}',
        cart_change_url: '{{ routes.cart_change_url }}',
        cart_update_url: '{{ routes.cart_update_url }}',
        cart_url: '{{ routes.cart_url }}',
        predictive_search_url: '{{ routes.predictive_search_url }}'
      };
    </script>
  </body>
</html>
